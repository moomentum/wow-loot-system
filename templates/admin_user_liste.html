{% extends "base.html" %}
{% block title %}Admin: Benutzer verwalten{% endblock %}
{% block content %}
    <h1>Admin: Alle Benutzer verwalten</h1>
    <table>
        <thead>
            <tr>
                <th>Benutzername</th>
                <th>Rolle</th>
                <th colspan="2">Aktionen</th>
            </tr>
        </thead>
        <tbody>
            {% for user in user_liste %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.role }}</td>
                <td>
                    {% if user.id != current_user.id %}
                        {% if user.role == 'member' %}
                            <form action="{{ url_for('admin_user_promote', user_id=user.id) }}" method="post">
                                <button type="submit" class="button btn-green">Zum Admin ernennen</button>
                            </form>
                        {% elif user.role == 'admin' %}
                            <form action="{{ url_for('admin_user_demote', user_id=user.id) }}" method="post">
                                <button type="submit" class="button btn-yellow">Zum Mitglied degradieren</button>
                            </form>
                        {% endif %}
                    {% else %}
                        (Eigener Account)
                    {% endif %}
                </td>
                <td>
                    {% if user.id != current_user.id %}
                        <form action="{{ url_for('admin_user_loeschen', user_id=user.id) }}" method="post" onsubmit="return confirm('Benutzer {{ user.username }} und ALLE seine Charaktere endgültig löschen? Diese Aktion kann nicht rückgängig gemacht werden!');">
                            <button type="submit" class="button btn-red">Löschen</button>
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}